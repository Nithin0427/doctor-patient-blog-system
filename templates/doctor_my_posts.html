{% extends "base.html" %}
{% block content %}
<h2>My Posts</h2>
<a class="btn btn-primary mb-3" href="{{ url_for('doctor_create_post') }}">Create New</a>
<div class="list-group">
  {% for p in posts %}
  <div class="list-group-item">
    <div class="d-flex w-100 justify-content-between">
      <h5 class="mb-1">{{ p.title }}</h5>
      <small>{{ p.created_at.strftime('%Y-%m-%d') }} - {{ 'Draft' if p.is_draft else 'Published' }}</small>
    </div>
    <p class="mb-1">{{ p.summary_truncated(15) }}</p>
    {% if p.image_filename %}
    <img src="{{ url_for('uploaded_image', filename=p.image_filename) }}" style="max-width:200px;">
    {% endif %}
    <div class="mt-2">
      <a class="btn btn-sm btn-outline-primary" href="{{ url_for('blog_detail', post_id=p.id) }}">View</a>
    </div>
  </div>
  {% else %}
  <div class="alert alert-info">No posts yet.</div>
  {% endfor %}
</div>
{% endblock %}